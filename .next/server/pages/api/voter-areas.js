"use strict";(()=>{var e={};e.id=878,e.ids=[878],e.modules={11185:e=>{e.exports=require("mongoose")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},92824:e=>{e.exports=require("next/server")},16689:e=>{e.exports=require("react")},99369:e=>{e.exports=import("jose")},29647:(e,r,t)=>{t.a(e,async(e,n)=>{try{t.r(r),t.d(r,{config:()=>l,default:()=>d,routeModule:()=>u});var o=t(71802),a=t(47153),i=t(56249),s=t(40975),c=e([s]);s=(c.then?(await c)():c)[0];let d=(0,i.l)(s,"default"),l=(0,i.l)(s,"config"),u=new o.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/voter-areas",pathname:"/api/voter-areas",bundlePath:"",filename:""},userland:s});n()}catch(e){n(e)}})},55320:(e,r,t)=>{t.a(e,async(e,n)=>{try{t.d(r,{je:()=>s});var o=t(99369);t(53121),t(92824);var a=e([o]);o=(a.then?(await a)():a)[0];let c=process.env.SECRET_KEY,d=new TextEncoder().encode(c),l=process.env.ADMIN_SECRET_KEY;async function i(e){try{let{payload:r}=await (0,o.jwtVerify)(e,d,{algorithms:["HS256"]});return r}catch(e){if("ERR_JWT_EXPIRED"===e.code)throw Error("Token has expired");throw Error("Token verification failed")}}async function s(e){try{return await i(e)}catch(e){return null}}new TextEncoder().encode(l),n()}catch(e){n(e)}})},8614:(e,r,t)=>{t.d(r,{Z:()=>i});var n=t(11185),o=t.n(n);let a=new(o()).Schema({voter_id:{type:String,required:!0},name:{type:String,required:!0},phone:{type:String,required:!0},date_of_birth:{type:String,required:!0},unit:{type:String,required:!0},area:{type:String,required:!0},verified:{type:Boolean,required:!0},present:{type:Boolean,required:!0},voted:{type:Boolean,required:!0}}),i=o().models.Voter||o().model("Voter",a)},40975:(e,r,t)=>{t.a(e,async(e,n)=>{try{t.r(r),t.d(r,{default:()=>c});var o=t(60578),a=t(8614),i=t(55320),s=e([i]);async function c(e,r){if("GET"===e.method)try{if(!await (0,i.je)(e.headers.cookie?.split("; ").find(e=>e.startsWith("session="))?.split("=")[1]))return r.status(401).json({error:"Unauthorized"});await (0,o.v)(),console.log("Get voters request received");let t=await a.Z.find({}),n=[...new Set(t.map(e=>e.area))];r.status(200).json(n)}catch(e){r.status(500).json({error:"Internal Server Error"})}else r.setHeader("Allow",["GET"]),r.status(405).end(`Method ${e.method} Not Allowed`)}i=(s.then?(await s)():s)[0],n()}catch(e){n(e)}})},60578:(e,r,t)=>{t.d(r,{v:()=>s});var n=t(11185),o=t.n(n);let a="mongodb://tauseef:IntekhaabPurAman@20.2.88.8:27017/yourdbname?authSource=admin";if(!a)throw Error("Please define the NEXT_PUBLIC_MONGODB_URI environment variable inside .env.local");let i=global.mongoose;async function s(){if(i.conn)return i.conn;i.promise||(i.promise=o().connect(a,{useNewUrlParser:!0,useUnifiedTopology:!0}).then(e=>e));try{i.conn=await i.promise}catch(e){throw console.error("Database connection failed:",e),Error("Database connection failed")}return i.conn}i||(i=global.mongoose={conn:null,promise:null})}};var r=require("../../webpack-api-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[643],()=>t(29647));module.exports=n})();