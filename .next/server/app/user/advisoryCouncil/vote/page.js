(()=>{var e={};e.id=290,e.ids=[290],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},85042:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),t(29224),t(69894),t(85476),t(6237),t(11506),t(19644),t(35866);var a=t(23191),r=t(88716),n=t(37922),i=t.n(n),l=t(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let c=["",{children:["user",{children:["advisoryCouncil",{children:["vote",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,29224)),"E:\\Programming\\Intekhaab\\admin\\app\\user\\advisoryCouncil\\vote\\page.tsx"]}]},{}]},{loading:[()=>Promise.resolve().then(t.bind(t,69894)),"E:\\Programming\\Intekhaab\\admin\\app\\user\\advisoryCouncil\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,85476)),"E:\\Programming\\Intekhaab\\admin\\app\\user\\layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,6237)),"E:\\Programming\\Intekhaab\\admin\\app\\user\\loading.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,11506)),"E:\\Programming\\Intekhaab\\admin\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,19644)),"E:\\Programming\\Intekhaab\\admin\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["E:\\Programming\\Intekhaab\\admin\\app\\user\\advisoryCouncil\\vote\\page.tsx"],u="/user/advisoryCouncil/vote/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/user/advisoryCouncil/vote/page",pathname:"/user/advisoryCouncil/vote",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},52196:(e,s,t)=>{Promise.resolve().then(t.bind(t,33306))},33306:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>z});var a=t(10326),r=t(17577),n=t(86508),i=t(11798),l=t(941),o=t(90772),c=t(53313),d=t(60097),u=t(15940),x=t(44099),m=t(99440),h=t(76812),g=t(34474);function p({table:e}){return a.jsx(a.Fragment,{children:a.jsx("div",{className:"flex items-center justify-between px-2",children:(0,a.jsxs)("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"text-sm text-muted-foreground ",children:"Rows per page"}),(0,a.jsxs)(g.Ph,{value:`${e.getState().pagination.pageSize}`,onValueChange:s=>{e.setPageSize(Number(s))},children:[a.jsx(g.i4,{className:"h-8 w-[70px]",children:a.jsx(g.ki,{placeholder:e.getState().pagination.pageSize})}),a.jsx(g.Bw,{side:"top",children:[5,10,20,30,40,50].map(e=>a.jsx(g.Ql,{value:`${e}`,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",e.getState().pagination.pageIndex+1," of"," ",e.getPageCount()]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(o.z,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),children:[a.jsx("span",{className:"sr-only",children:"Go to first page"}),a.jsx(h.kRt,{className:"h-4 w-4"})]}),(0,a.jsxs)(o.z,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),children:[a.jsx("span",{className:"sr-only",children:"Go to previous page"}),a.jsx(h.wyc,{className:"h-4 w-4"})]}),(0,a.jsxs)(o.z,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),children:[a.jsx("span",{className:"sr-only",children:"Go to next page"}),a.jsx(h.XCv,{className:"h-4 w-4"})]}),(0,a.jsxs)(o.z,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),children:[a.jsx("span",{className:"sr-only",children:"Go to last page"}),a.jsx(h.yr4,{className:"h-4 w-4"})]})]})]})})})}var j=t(36297),v=t(54432),f=t(77863),w=t(567),y=t(72459),C=t(30811),b=t(8281);function N({column:e,title:s,options:t=[]}){let r=e?.getFacetedUniqueValues(),n=new Set(e?.getFilterValue());return(0,a.jsxs)(C.J2,{children:[a.jsx(C.xo,{asChild:!0,children:(0,a.jsxs)(o.z,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[a.jsx(h.SPS,{className:"mr-2 h-4 w-4"}),s,n?.size>0&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(b.Z,{orientation:"vertical",className:"mx-2 h-4"}),a.jsx(w.C,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:n.size}),a.jsx("div",{className:"hidden space-x-1 lg:flex",children:n.size>2?(0,a.jsxs)(w.C,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[n.size," selected"]}):t.filter(e=>n.has(e.value)).map(e=>a.jsx(w.C,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:e.label},e.value))})]})]})}),a.jsx(C.yk,{className:"w-[200px] p-0",align:"start",children:(0,a.jsxs)(y.mY,{children:[a.jsx(y.sZ,{placeholder:s}),(0,a.jsxs)(y.e8,{children:[a.jsx(y.rb,{children:"No results found."}),a.jsx(y.fu,{children:t.map((s,t)=>{let i=n.has(s.value);return(0,a.jsxs)(y.di,{onSelect:()=>{i?n.delete(s.value):n.add(s.value);let t=Array.from(n);e?.setFilterValue(t.length?t:void 0),console.log(e?.getFilterValue())},children:[a.jsx("div",{className:(0,f.cn)("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i?"bg-primary text-primary-foreground":"opacity-80 [&_svg]:invisible"),children:a.jsx(h.nQG,{className:(0,f.cn)("h-4 w-4")})}),s.icon&&a.jsx(s.icon,{className:"mr-2 h-4 w-4 "}),a.jsx("span",{children:s.label||"Unknown"}),r?.get(s.value)&&a.jsx("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:r.get(s.value)})]},t)})}),n.size>0&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(y.zz,{}),a.jsx(y.fu,{children:a.jsx(y.di,{onSelect:()=>e?.setFilterValue(void 0),className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}function P({table:e}){let[s,t]=(0,r.useState)([]),n=e.getState().columnFilters.length>0;return console.log(e.getState().columnFilters),a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex flex-1 items-center space-x-2",children:[a.jsx(v.I,{placeholder:"Search...",value:e.getColumn("name")?.getFilterValue()??"",onChange:s=>e.getColumn("name")?.setFilterValue(s.target.value),className:"h-8 w-[150px] lg:w-[250px]"}),e.getColumn("area")&&s.length>0&&a.jsx(N,{column:e.getColumn("area"),title:"Area",options:s}),n&&(0,a.jsxs)(o.z,{variant:"ghost",onClick:()=>e.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",a.jsx(h.Pxu,{className:"ml-2 h-4 w-4"})]})]})})}var S=t(85999),k=t(90139);function _({election:e,user:s}){let[t,h]=(0,r.useState)(!0),g=[{id:"select",header:({table:e})=>a.jsx(c.X,{checked:e.getIsAllPageRowsSelected()||e.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:s=>e.toggleAllPageRowsSelected(!!s),"aria-label":"Select all"}),cell:({row:e})=>a.jsx(c.X,{checked:e.getIsSelected(),onCheckedChange:s=>e.toggleSelected(!!s),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!0},{accessorKey:"candidate_id",header:"ID"},{accessorKey:"name",header:"Name"},{accessorKey:"unit",header:"Unit"},{accessorKey:"area",header:"Area",filterFn:(e,s,t)=>{let a=e.getValue(s);return Array.isArray(t)?t.some(e=>a.toLowerCase().includes(e.toLowerCase())):a.toLowerCase().includes(t.toLowerCase())}},{accessorKey:"phone",header:"Phone"}],[v,f]=r.useState([]);r.useEffect(()=>{console.log("Election:",e),(async()=>{try{let e=(await x.Z.get("/api/getCandidates")).data.filter(e=>e.candidate_id!==s?.voter_id);f(e),h(!1)}catch(e){e instanceof Error?alert("Error fetching data: "+e.message):alert("An unknown error occurred")}})()},[]);let[w,y]=r.useState([]),[C,b]=r.useState([]),[N,_]=r.useState({name:!0,area:!0,unit:!0,phone:!1}),[q,R]=r.useState({}),z=e?.council_size??2,A=(0,n.b7)({data:v,columns:g,onSortingChange:y,onColumnFiltersChange:b,getCoreRowModel:(0,i.sC)(),getPaginationRowModel:(0,i.G_)(),getSortedRowModel:(0,i.tj)(),getFilteredRowModel:(0,i.vL)(),onColumnVisibilityChange:_,onRowSelectionChange:e=>{let s="function"==typeof e?e(q):e;Object.values(s).filter(Boolean).length<=z?R(s):S.A.error(`Please select ${z} candidates`)},state:{sorting:w,columnFilters:C,columnVisibility:N,rowSelection:q}}),[I,E]=r.useState([]);r.useEffect(()=>{E(A.getSelectedRowModel().rows.map(e=>e.original._id))},[A.getSelectedRowModel().rows]);let F=async()=>{if(console.log("Voting for:",I),I.length<z){S.A.error(`Please select ${z} candidates`);return}try{await x.Z.post(`/api/vote/${s?.voter_id}`,{candidateVotes:I}),await (0,j.Qk)(),alert("Voting successful"),window.location.href="/"}catch(e){S.A.error("Error voting: "+e)}};return t?a.jsx(k.Z,{}):(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex items-center py-4",children:[a.jsx(P,{table:A}),(0,a.jsxs)(d.h_,{children:[a.jsx(d.$F,{asChild:!0,children:(0,a.jsxs)(o.z,{variant:"outline",className:"ml-auto",children:["View ",a.jsx(l.Z,{className:"ml-2 h-4 w-4"})]})}),a.jsx(d.AW,{align:"end",children:A.getAllColumns().filter(e=>e.getCanHide()).map(e=>a.jsx(d.bO,{className:"capitalize",checked:e.getIsVisible(),onCheckedChange:s=>e.toggleVisibility(!!s),children:e.id},e.id))})]})]}),a.jsx("div",{className:"rounded-md border",children:(0,a.jsxs)(u.iA,{children:[a.jsx(u.xD,{children:A.getHeaderGroups().map(e=>a.jsx(u.SC,{children:e.headers.map(e=>a.jsx(u.ss,{children:e.isPlaceholder?null:(0,n.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),a.jsx(u.RM,{children:A.getRowModel().rows?.length?A.getRowModel().rows.map(e=>a.jsx(u.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>a.jsx(u.pj,{children:(0,n.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):a.jsx(u.SC,{children:a.jsx(u.pj,{colSpan:g.length,className:"h-24 text-center",children:"No results."})})})]})}),a.jsx("div",{className:"flex items-center justify-end space-x-2 py-4",children:a.jsx(p,{table:A})}),(0,a.jsxs)("div",{className:"flex items-center justify-around space-x-2 py-4 px-4",children:[(0,a.jsxs)("div",{className:"flex-1 text-sm text-muted-foreground",children:[A.getFilteredSelectedRowModel().rows.length," of"," ",A.getFilteredRowModel().rows.length," row(s) selected."]}),(0,a.jsxs)(m.aR,{children:[a.jsx(m.vW,{asChild:!0,children:a.jsx(o.z,{onClick:()=>console.log(A.getSelectedRowModel().rows),children:"Vote"})}),(0,a.jsxs)(m._T,{children:[(0,a.jsxs)(m.fY,{children:[a.jsx(m.f$,{children:"Are you absolutely sure?"}),a.jsx(m.yT,{children:A.getSelectedRowModel().rows.map(e=>a.jsx("p",{children:`ID: ${e.original.candidate_id}, Area: ${e.original.area}, Name: ${"object"==typeof e.original.name?JSON.stringify(e.original.name):e.original.name}`},e.id))})]}),(0,a.jsxs)(m.xo,{children:[a.jsx(m.le,{children:"Cancel"}),a.jsx(m.OL,{onClick:()=>F(),children:"Continue"})]})]})]})]})]})}var q=t(35047),R=t(46103);function z(){(0,q.useRouter)();let[e,s]=(0,r.useState)(null),{user:t}=(0,R.a)();return a.jsx("div",{children:a.jsx(_,{election:e,user:t})})}},69894:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var a=t(19510);function r(){return a.jsx("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Loading..."}),a.jsx("div",{className:"w-8 h-8 border-t-2 border-b-2 border-blue-500 rounded-full animate-spin"})]})})}t(71159)},29224:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var a=t(68570);let r=(0,a.createProxy)(String.raw`E:\Programming\Intekhaab\admin\app\user\advisoryCouncil\vote\page.tsx`),{__esModule:n,$$typeof:i}=r;r.default;let l=(0,a.createProxy)(String.raw`E:\Programming\Intekhaab\admin\app\user\advisoryCouncil\vote\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[948,992,167,759,953,245,326,960,47,323],()=>t(85042));module.exports=a})();